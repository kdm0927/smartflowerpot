<back-btn text="Back" home="/pages/index/index" />

<!-- ë°°ê²½ & ìƒë‹¨ í—¤ë” -->
<image class="album-bg" src="/images/albumbg.png" />

<view class="header-scrim"></view>
<view class="header">
  <text class="title">Growth Album ðŸ“¸</text>
  <text class="sub">{{today}}, Growing+{{growing}}</text>
</view>

<!-- ë³¸ë¬¸ -->
<view class="container">

  <!-- ëª©ë¡ -->
  <block wx:for="{{list}}" wx:key="_id">
    <view class="entry" bindlongpress="deleteEntry" data-id="{{item._id}}" data-fileid="{{item.photoUrl}}">
      <!-- ì‚¬ì§„ê³¼ í”„ë ˆìž„ -->
      <view class="photo-wrap">
        <image class="img" src="{{item.photoUrl}}" mode="aspectFill" />
        <image class="frame" src="/images/frame1.png" mode="aspectFill" />
      </view>

      <!-- ë‚ ì§œ(ì˜¤ë¥¸ìª½ ìƒë‹¨) -->
      <text class="date">{{item.displayTime.split(' ')[0]}}</text>

      <!-- ë§í’ì„  ìº¡ì…˜ -->
      <view class="bubble"><text class="bubble-text">{{item.note}}</text></view>
    </view>
  </block>

    <!-- ìž‘ì„± í¼ (ë””ìžì¸ê³¼ ê²¹ì¹˜ì§€ ì•Šê²Œ ë°˜íˆ¬ëª…) -->
    <view class="card composer">
    <view class="pick-row">
      <image wx:if="{{compose.photoTempPath}}" class="preview" mode="aspectFill" src="{{compose.photoTempPath}}" />
      <button wx:if="{{!compose.photoTempPath}}" class="pick-btn" bindtap="pickImage">+ Add Photo</button>
      <button wx:if="{{compose.photoTempPath}}" class="remove-btn" bindtap="removePicked">Remove</button>
    </view>
    <textarea class="note-input"
      placeholder="Write a caption..."
      maxlength="300"
      bindinput="onNoteInput"
      value="{{compose.note}}"
      auto-height
    />
    <button class="submit" type="primary" bindtap="submitEntry" loading="{{submitting}}">Post</button>
  </view>

  <view class="empty" wx:if="{{!list.length}}">No entries yet</view>
</view>
